<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ display[1] }} - Digital Signage Player</title>

    <!-- Google Fonts - Inter for modern typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/player.css') }}">
</head>
<body>
    <!-- Top Bar with Date/Time -->
    <header id="topBar" class="top-bar">
        <div class="top-bar-left">
            <div id="currentTime" class="time-display">--:--:--</div>
        </div>
        <div class="top-bar-right">
            <div id="currentDate" class="date-display">Loading...</div>
        </div>
    </header>

    <!-- Main Display Grid -->
    <main id="displayGrid" class="display-grid">
        <!-- Zones will be generated here by JavaScript -->
    </main>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/player.js') }}"></script>
    <script>
        try {
            // Initialize player with display configuration
            const displayConfig = {{ display_data|tojson }};

            console.log('Display config from template:', displayConfig);

            // Adapt the config format for the player
            const playerConfig = {
                id: displayConfig.id,
                name: displayConfig.name,
                layout: displayConfig.layout_config,
                background: displayConfig.background_config
            };

            window.addEventListener('DOMContentLoaded', function() {
                initializePlayer(playerConfig);
            });
        } catch (error) {
            console.error('Error initializing player:', error);
            document.getElementById('displayGrid').innerHTML =
                '<div style="color: #ef4444; padding: 40px; text-align: center; font-size: 1.25rem;">Error: ' + error.message + '</div>';
        }
    </script>
</body>
</html>
